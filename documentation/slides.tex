%%
% Building some illustrations for later
%%
\documentclass{beamer}

\usepackage{tikz}
\usetikzlibrary{arrows}
\usepackage{verbatim}

\usepackage{algorithm}
\usepackage[noend]{algpseudocode}


\usetheme{CambridgeUS}
\usetikzlibrary{positioning}


\begin{document}


\section{Union-Find algorithm}

\section{REM algorithm}

  \begin{frame}{Connected components and spanning forests}

  \end{frame}

  \begin{frame}{Representing a component}
    \begin{figure}
      \begin{tikzpicture}[shorten >=1pt,->]
        \tikzstyle{vertex} = [circle, draw=black]
        \tikzstyle{legend} = [color=gray, font=\tiny]

        % Nodes
        \foreach \index / \x in {0/5, 1/6, 2/1, 3/4, 4/0, 5/2}
          \node[vertex] (\index) at (\x, 5-\index) {$\index$};

        % Edges
        \draw[->] (4) -- (2);
        \draw[->] (5) -- (2);
        \draw[->] (1) -- (0);
        \draw[->] (3) -- (0);

        % Disjoint set
        \tikzstyle{value} = [draw=black, fill=blue!15, minimum width=0.5cm, minimum height=0.5cm]
        \tikzstyle{index} = [color=darkgray, font=\small]

        \foreach \i / \x in {0/0, 1/0, 2/2, 3/0, 4/2, 5/2} {%
          \node[index] at (2 + \i / 2, -1) {\i};
            \node[value] at (2 + \i / 2, -1.5) {\x};
        }

      \end{tikzpicture}
    \end{figure}
  \end{frame}

  \begin{frame}{Inserting an edge}
    \only<1> {$p(5) > p(3)$}
    \onslide<2> {$p(2) > p(3)$}

    \begin{figure}
      \begin{tikzpicture}[shorten >=1pt,->]
        \tikzstyle{vertex} = [circle, draw=black]
        \tikzstyle{legend} = [color=gray, font=\tiny]

        % Nodes
        \foreach \index / \x in {0/5, 1/6, 2/1, 3/4, 4/0, 5/2}
          \node[vertex] (\index) at (\x, 5-\index) {$\index$};

        % Edges
        \draw[->] (4) -- (2);
        \onslide<-2>{%
          \draw [->] (2.90) arc (2:264:3mm) {} (0);
        }
        \onslide<3->{%
          \draw[green, ->] (2) -- (0);
        }

        \onslide<-1>{%
          \draw[->] (5) -- (2);
        }
        \onslide<2-> {%
          \draw[green, ->] [in=225, out=120] (5) to (0);
        }

        \draw [->] (0.90) arc (0:264:3mm) {} (0);
        \draw[->] (1) -- (0);
        \draw[->] (3) -- (0);

        % Edge to insert
        \onslide<1>{\draw[dotted, -] (5) -- (3);}
        \onslide<2>{\draw[dotted, -] (2) -- (3);}

        % r_x and r_y legend
        \onslide<1> {%
          \node[legend, right=0mm of 5] {$r_x$};
          \node[legend, right=0mm of 3] {$r_y$};
          \node[legend, right=0mm of 2] {$p(r_x)$};
          \node[legend, right=0mm of 0] {$p(r_y)$};
        }
        \onslide<2> {%
          \node[legend, right=0mm of 2] {$p(r_x) = r_x$};
          \node[legend, right=0mm of 3] {$r_y$};
          \node[legend, right=0mm of 0] {$p(r_y)$};
        }
      \end{tikzpicture}

      \caption{Inserting edge $(5, 3)$}
    \end{figure}
  \end{frame}

  \begin{frame}{Inserting an edge}
    \only<1> {$p(5) > p(3)$: $r_x \leftarrow p(r_x)$}
    \only<2> {$p(4) < p(3)$: $r_y \leftarrow p(r_y)$}
    \only<3> {$p(4) > p(2)$: $r_x \leftarrow p(r_x)$}
    \onslide<4> {$p(1) > p(2)$: $r_x \leftarrow p(r_x)$}

    \begin{figure}
      \begin{tikzpicture}[shorten >=1pt,->]
        \tikzstyle{vertex} = [circle, draw=black]
        \tikzstyle{legend} = [color=gray, font=\tiny]

        % Nodes
        \foreach \index / \x in {0/5, 1/0, 2/5, 3/5, 4/0, 5/0}
          \node[vertex] (\index) at (\x, 5-\index) {$\index$};

        % Edges
        \onslide<-4> {%
          \draw [->] (1.90) arc (1:264:3mm) {} (1);
        }
        \onslide<-3> {%
          \draw[->] (4) -- (1);
        }
        \onslide<-1> {%
          \draw[->] (5) -- (4);
        }

        \draw [->] (0.90) arc (0:264:3mm) {} (0);
        \draw[->] (2) -- (0);
        \onslide<-2> {%
          \draw[->] (3) -- (2);
        }

        \onslide<2-> {%
          \draw[green, ->] (5) -- (2);
        }

        \onslide<3-> {%
          \draw[green, ->] (3) -- (1);
        }

        \onslide<4-> {%
          \draw[green, ->] (4) -- (0);
        }

        \onslide<5-> {%
          \draw[green, ->] (1) -- (0);
        }

        % Edge to insert
        \onslide<1>{\draw[dotted, -] (5) -- (3);}
        \onslide<2>{\draw[dotted, -] (4) -- (3);}
        \onslide<3>{\draw[dotted, -] (4) -- (2);}
        \onslide<4>{\draw[dotted, -] (1) -- (2);}

        % r_x and r_y legend
        \onslide<1> {%
          \node[legend, right=0mm of 5] {$r_x$};
          \node[legend, right=0mm of 4] {$p(r_x)$};
          \node[legend, right=0mm of 3] {$r_y$};
          \node[legend, right=0mm of 2] {$p(r_y)$};
        }
        \onslide<2> {%
          \node[legend, right=0mm of 4] {$r_x$};
          \node[legend, right=0mm of 1] {$p(r_x)$};
          \node[legend, right=0mm of 3] {$r_y$};
          \node[legend, right=0mm of 2] {$p(r_y)$};
        }
        \onslide<3> {%
          \node[legend, right=0mm of 4] {$r_x$};
          \node[legend, right=0mm of 1] {$p(r_x)$};
          \node[legend, right=0mm of 2] {$r_y$};
          \node[legend, right=0mm of 0] {$p(r_y)$};
        }
        \onslide<4> {%
          \node[legend, right=0mm of 1] {$p(r_x) = r_x$};
          \node[legend, right=0mm of 2] {$r_y$};
          \node[legend, right=0mm of 0] {$p(r_y)$};
        }
      \end{tikzpicture}

      \caption{Inserting edge $(5, 3)$}
    \end{figure}
  \end{frame}

\section{Distributed REM algorithm}

  \begin{frame}{Distributed memory algorithms}
    \begin{figure}
      \caption{Bulk Model}
      \begin{tikzpicture}
        \tikzstyle{process} = [draw=black, fill=blue!15, minimum width=0.5cm, minimum height=0.6cm]
        \tikzstyle{label} = [color=darkgray, font=\small]

        \node[label] at (-1, 3) {process 1};
        \node[label] at (-1, 2) {process 2};
        \node[label] at (-1, 1) {process 3};

        \draw[double distance=2pt,->,>=angle 90,thick] (0, 0) -- (8, 0) node [below,pos=0.25] {time};
        %\node[legend, right=0mm of 5] {$r_x$};

        \node[process] (11) at (1, 1) {process};
        \node[process] (12) at (1, 2) {process};
        \node[process] (13) at (1, 3) {process};
        \draw[dashed,color=green!200] (1.8, 0.6) -- (1.8, 3.4) node [above,pos=1] {barrier};

        \node[process] (21) at (4, 1) {process};
        \node[process] (22) at (4, 2) {process};
        \node[process] (23) at (4, 3) {process};
        \draw[dashed,color=green!200] (4.8, 0.6) -- (4.8, 3.4) node [above,pos=1] {barrier};

        \node[process] (31) at (7, 1) {process};
        \node[process] (32) at (7, 2) {process};
        \node[process] (33) at (7, 3) {process};

        \draw[->] (11) -- (21);
        \draw[->] (11) -- (22);
        \draw[->] (12) -- (22);
        \draw[->] (12) -- (23);
        \draw[->] (13) -- (23);

        \draw[->] (21) -- (32);
        \draw[->] (21) -- (33);
        \draw[->] (22) -- (31);
        \draw[->] (22) -- (33);
        \draw[->] (23) -- (31);
        \draw[->] (23) -- (32);

      \end{tikzpicture}
    \end{figure}
  \end{frame}
\end{document}

